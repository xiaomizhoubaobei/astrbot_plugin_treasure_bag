name: 'ğŸ’¬ iFLOW CLI åŠ©æ‰‹'

# Bot åç§°é…ç½® - å°† BOT_NAME è®¾ç½®ä¸ºä»“åº“å˜é‡
# å‰å¾€ è®¾ç½® > Secrets and variables > Actions > Variables è¿›è¡Œé…ç½®
env:
  BOT_NAME: ${{ vars.BOT_NAME || 'iflow-cli' }}

on:
  pull_request_review_comment:
    types:
      - 'created'
  pull_request_review:
    types:
      - 'submitted'
  issue_comment:
    types:
      - 'created'

concurrency:
  group: '${{ github.workflow }}-${{ github.event.issue.number }}'
  cancel-in-progress: |-
    ${{ github.event.sender.type == 'User' && ( github.event.issue.author_association == 'OWNER' || github.event.issue.author_association == 'MEMBER' || github.event.issue.author_association == 'COLLABORATOR') }}

defaults:
  run:
    shell: 'bash'

permissions:
  contents: 'write'
  id-token: 'write'
  pull-requests: 'write'
  issues: 'write'

jobs:
  iflow-cli:
    # æ­¤æ¡ä»¶ç¡®ä¿æ“ä½œä»…åœ¨å—ä¿¡ä»»ç”¨æˆ·è§¦å‘æ—¶è¿è¡Œã€‚
    # å¯¹äºç§æœ‰ä»“åº“ï¼Œæœ‰æƒè®¿é—®ä»“åº“çš„ç”¨æˆ·è¢«è§†ä¸ºå—ä¿¡ä»»ç”¨æˆ·ã€‚
    # å¯¹äºå…¬å…±ä»“åº“ï¼Œæˆå‘˜ã€æ‰€æœ‰è€…æˆ–åä½œè€…è¢«è§†ä¸ºå—ä¿¡ä»»ç”¨æˆ·ã€‚
    # Bot åç§°ä»ä»“åº“å˜é‡ BOT_NAME å¼•ç”¨
    if: |-
      github.event_name == 'workflow_dispatch' ||
      (
        github.event_name == 'issues' && github.event.action == 'opened' &&
        contains(github.event.issue.body, format('@{0}', vars.BOT_NAME || 'iflow-cli')) &&
        !contains(github.event.issue.body, format('@{0} /review', vars.BOT_NAME || 'iflow-cli')) &&
        !contains(github.event.issue.body, format('@{0} /triage', vars.BOT_NAME || 'iflow-cli')) &&
        (
          github.event.repository.private == true ||
          contains(fromJSON('["OWNER", "MEMBER", "COLLABORATOR"]'), github.event.issue.author_association)
        )
      ) ||
      (
        (
          github.event_name == 'issue_comment' ||
          github.event_name == 'pull_request_review_comment'
        ) &&
        contains(github.event.comment.body, format('@{0}', vars.BOT_NAME || 'iflow-cli')) &&
        !contains(github.event.comment.body, format('@{0} /review', vars.BOT_NAME || 'iflow-cli')) &&
        !contains(github.event.comment.body, format('@{0} /triage', vars.BOT_NAME || 'iflow-cli')) &&
        (
          github.event.repository.private == true ||
          contains(fromJSON('["OWNER", "MEMBER", "COLLABORATOR"]'), github.event.comment.author_association)
        )
      ) ||
      (
        github.event_name == 'pull_request_review' &&
        contains(github.event.review.body, format('@{0}', vars.BOT_NAME || 'iflow-cli')) &&
        !contains(github.event.review.body, format('@{0} /review', vars.BOT_NAME || 'iflow-cli')) &&
        !contains(github.event.review.body, format('@{0} /triage', vars.BOT_NAME || 'iflow-cli')) &&
        (
          github.event.repository.private == true ||
          contains(fromJSON('["OWNER", "MEMBER", "COLLABORATOR"]'), github.event.review.author_association)
        )
      )
    runs-on: 'ubuntu-latest'
    steps:
      - name: Harden the runner (Audit all outbound calls)
        uses: step-security/harden-runner@5ef0c079ce82195b2a36a210272d6b661572d83e # v2.14.2
        with:
          egress-policy: audit
      - name: 'ç”Ÿæˆ GitHub App Token'
        id: 'generate_token'
        if: |-
          ${{ vars.APP_ID }}
        uses: 'actions/create-github-app-token@df432ceedc7162793a195dd1713ff69aefc7379e' # ratchet:actions/create-github-app-token@v2
        with:
          app-id: '${{ vars.APP_ID }}'
          private-key: '${{ secrets.APP_PRIVATE_KEY }}'

      - name: 'ä»äº‹ä»¶ä¸­è·å–ä¸Šä¸‹æ–‡'
        id: 'get_context'
        env:
          EVENT_NAME: '${{ github.event_name }}'
          EVENT_PAYLOAD: '${{ toJSON(github.event) }}'
        run: |-
          set -euo pipefail

          USER_REQUEST=""
          ISSUE_NUMBER=""
          IS_PR="false"

          if [[ "${EVENT_NAME}" == "issues" ]]; then
            USER_REQUEST=$(echo "${EVENT_PAYLOAD}" | jq -r .issue.body)
            ISSUE_NUMBER=$(echo "${EVENT_PAYLOAD}" | jq -r .issue.number)
          elif [[ "${EVENT_NAME}" == "issue_comment" ]]; then
            USER_REQUEST=$(echo "${EVENT_PAYLOAD}" | jq -r .comment.body)
            ISSUE_NUMBER=$(echo "${EVENT_PAYLOAD}" | jq -r .issue.number)
            if [[ $(echo "${EVENT_PAYLOAD}" | jq -r .issue.pull_request) != "null" ]]; then
              IS_PR="true"
            fi
          elif [[ "${EVENT_NAME}" == "pull_request_review" ]]; then
            USER_REQUEST=$(echo "${EVENT_PAYLOAD}" | jq -r .review.body)
            ISSUE_NUMBER=$(echo "${EVENT_PAYLOAD}" | jq -r .pull_request.number)
            IS_PR="true"
          elif [[ "${EVENT_NAME}" == "pull_request_review_comment" ]]; then
            USER_REQUEST=$(echo "${EVENT_PAYLOAD}" | jq -r .comment.body)
            ISSUE_NUMBER=$(echo "${EVENT_PAYLOAD}" | jq -r .pull_request.number)
            IS_PR="true"
          fi

          # æ¸…ç†ç”¨æˆ·è¯·æ±‚
          USER_REQUEST=$(echo "${USER_REQUEST}" | sed "s/.*@${BOT_NAME}//" | sed 's/^[[:space:]]*//;s/[[:space:]]*$//')

          {
            echo "user_request=${USER_REQUEST}"
            echo "issue_number=${ISSUE_NUMBER}"
            echo "is_pr=${IS_PR}"
          } >> "${GITHUB_OUTPUT}"

      - name: 'è®¾ç½® git ç”¨æˆ·ç”¨äºæäº¤'
        run: |-
          git config --global user.name "${BOT_NAME}[bot]"
          git config --global user.email "${BOT_NAME}[bot]@users.noreply.github.com"

      - name: 'æ£€å‡º PR åˆ†æ”¯'
        if: |-
          ${{  steps.get_context.outputs.is_pr == 'true' }}
        uses: 'actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683' # ratchet:actions/checkout@v4
        with:
          token: '${{ steps.generate_token.outputs.token || secrets.GITHUB_TOKEN }}'
          repository: '${{ github.repository }}'
          ref: 'refs/pull/${{ steps.get_context.outputs.issue_number }}/head'
          fetch-depth: 0

      - name: 'æ£€å‡º main åˆ†æ”¯'
        if: |-
          ${{  steps.get_context.outputs.is_pr == 'false' }}
        uses: 'actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683' # ratchet:actions/checkout@v4
        with:
          token: '${{ steps.generate_token.outputs.token || secrets.GITHUB_TOKEN }}'
          repository: '${{ github.repository }}'
          fetch-depth: 0

      - name: 'ç¡®è®¤æ”¶åˆ°è¯·æ±‚'
        env:
          GITHUB_ACTOR: '${{ github.actor }}'
          GITHUB_TOKEN: '${{ steps.generate_token.outputs.token || secrets.GITHUB_TOKEN }}'
          ISSUE_NUMBER: '${{ steps.get_context.outputs.issue_number }}'
          REPOSITORY: '${{ github.repository }}'
          REQUEST_TYPE: '${{ steps.get_context.outputs.request_type }}'
        run: |-
          set -euo pipefail
          MESSAGE="@${GITHUB_ACTOR} I've received your request and I'm working on it now! ğŸ¤–"
          if [[ -n "${MESSAGE}" ]]; then
            gh issue comment "${ISSUE_NUMBER}" \
              --body "${MESSAGE}" \
              --repo "${REPOSITORY}"
          fi

      - name: 'è·å–æè¿°'
        id: 'get_description'
        env:
          GITHUB_TOKEN: '${{ steps.generate_token.outputs.token || secrets.GITHUB_TOKEN }}'
          IS_PR: '${{ steps.get_context.outputs.is_pr }}'
          ISSUE_NUMBER: '${{ steps.get_context.outputs.issue_number }}'
        run: |-
          set -euo pipefail
          if [[ "${IS_PR}" == "true" ]]; then
            DESCRIPTION=$(gh pr view "${ISSUE_NUMBER}" --json body --template '{{.body}}')
          else
            DESCRIPTION=$(gh issue view "${ISSUE_NUMBER}" --json body --template '{{.body}}')
          fi
          {
            echo "description<<EOF"
            echo "${DESCRIPTION}"
            echo "EOF"
          } >> "${GITHUB_OUTPUT}"

      - name: 'è·å–è¯„è®º'
        id: 'get_comments'
        env:
          GITHUB_TOKEN: '${{ steps.generate_token.outputs.token || secrets.GITHUB_TOKEN }}'
          IS_PR: '${{ steps.get_context.outputs.is_pr }}'
          ISSUE_NUMBER: '${{ steps.get_context.outputs.issue_number }}'
        run: |-
          set -euo pipefail
          if [[ "${IS_PR}" == "true" ]]; then
            COMMENTS=$(gh pr view "${ISSUE_NUMBER}" --json comments --template '{{range .comments}}{{.author.login}}: {{.body}}{{"\n"}}{{end}}')
          else
            COMMENTS=$(gh issue view "${ISSUE_NUMBER}" --json comments --template '{{range .comments}}{{.author.login}}: {{.body}}{{"\n"}}{{end}}')
          fi
          {
            echo "comments<<EOF"
            echo "${COMMENTS}"
            echo "EOF"
          } >> "${GITHUB_OUTPUT}"

      - name: 'è¿è¡Œ iFLOW'
        id: 'run_iflow'
        uses: 'iflow-ai/iflow-cli-action@66bf336db117b4a06147af2901a34dc802bbd236'
        env:
          GITHUB_TOKEN: '${{ steps.generate_token.outputs.token || secrets.GITHUB_TOKEN }}'
          REPOSITORY: '${{ github.repository }}'
          USER_REQUEST: '${{ steps.get_context.outputs.user_request }}'
          ISSUE_NUMBER: '${{ steps.get_context.outputs.issue_number }}'
          IS_PR: '${{ steps.get_context.outputs.is_pr }}'
        with:
          precmd: "git config --global --add safe.directory /github/workspace"
          api_key: ${{ secrets.IFLOW_API_KEY }}
          timeout: "3600"
          debug: "true"
          settings_json: |
            {
                "selectedAuthType": "iflow",
                "apiKey": "${{ secrets.IFLOW_API_KEY }}",
                "baseUrl": "https://apis.iflow.cn/v1",
                "modelName": "qwen3-coder-plus",
                "searchApiKey": "${{ secrets.IFLOW_API_KEY }}",
                "mcpServers": {
                  "github": {
                    "command": "github-mcp-server",
                    "args": [
                      "stdio"
                    ],
                    "includeTools": [
                      "create_pending_pull_request_review",
                      "add_comment_to_pending_review",
                      "submit_pending_pull_request_review",
                      "list_pull_requests"
                    ],
                    "env": {
                      "GITHUB_PERSONAL_ACCESS_TOKEN": "${{ secrets.GITHUB_TOKEN }}"
                    }
                  }
                }
            }
          prompt: |-
            ## è§’è‰²

            ä½ æ˜¯ä¸€ä¸ªé€šè¿‡ GitHub å·¥ä½œæµä¸­çš„ CLI æ¥å£è°ƒç”¨çš„æœ‰ç”¨ AI åŠ©æ‰‹ã€‚ä½ å¯ä»¥ä½¿ç”¨å·¥å…·ä¸ä»“åº“äº¤äº’å¹¶å“åº”ç”¨æˆ·ã€‚

            ## ä¸Šä¸‹æ–‡

            - **ä»“åº“**: `${{ github.repository }}`
            - **è§¦å‘äº‹ä»¶**: `${{ github.event_name }}`
            - **Issue/PR ç¼–å·**: `${{ steps.get_context.outputs.issue_number }}`
            - **è¿™æ˜¯ä¸€ä¸ª PR å—ï¼Ÿ**: `${{ steps.get_context.outputs.is_pr }}`
            - **Issue/PR æè¿°**:
            `${{ steps.get_description.outputs.description }}`
            - **è¯„è®º**:
            `${{ steps.get_comments.outputs.comments }}`

            ## ç”¨æˆ·è¯·æ±‚

            ç”¨æˆ·å‘é€äº†ä»¥ä¸‹è¯·æ±‚:
            `${{ steps.get_context.outputs.user_request }}`

            ## å¦‚ä½•å“åº” Issueã€PR è¯„è®ºå’Œé—®é¢˜

            æ­¤å·¥ä½œæµæ”¯æŒä¸‰ç§ä¸»è¦åœºæ™¯:

            1. **ä¸º Issue åˆ›å»ºä¿®å¤**
               - ä»”ç»†é˜…è¯»ç”¨æˆ·è¯·æ±‚å’Œç›¸å…³ issue æˆ– PR æè¿°ã€‚
               - ä½¿ç”¨å¯ç”¨å·¥å…·æ”¶é›†æ‰€æœ‰ç›¸å…³ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚ï¼Œ`gh issue view`ã€`gh pr view`ã€`gh pr diff`ã€`cat`ã€`head`ã€`tail`ï¼‰ã€‚
               - åœ¨ç»§ç»­ä¹‹å‰ç¡®å®šé—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚
               - **ä»¥æ¸…å•å½¢å¼æ˜¾ç¤ºå¹¶ç»´æŠ¤è®¡åˆ’**ï¼š
                 - åœ¨æœ€å¼€å§‹ï¼Œæ¦‚è¿°è§£å†³é—®é¢˜æˆ–å¤„ç†è¯·æ±‚æ‰€éœ€çš„æ­¥éª¤ï¼Œå¹¶å°†å…¶ä½œä¸ºæ¸…å•è¯„è®ºå‘å¸ƒåˆ° issue æˆ– PR ä¸Šï¼ˆä½¿ç”¨ GitHub markdown å¤é€‰æ¡†ï¼š`- [ ] ä»»åŠ¡`ï¼‰ã€‚
                 - ç¤ºä¾‹ï¼š
                   ```
                   ### è®¡åˆ’
                   - [ ] è°ƒæŸ¥æ ¹æœ¬åŸå› 
                   - [ ] åœ¨ `file.py` ä¸­å®ç°ä¿®å¤
                   - [ ] æ·»åŠ /ä¿®æ”¹æµ‹è¯•
                   - [ ] æ›´æ–°æ–‡æ¡£
                   - [ ] éªŒè¯ä¿®å¤å¹¶å…³é—­ issue
                   ```
                 - ä½¿ç”¨ï¼š`gh pr comment "${ISSUE_NUMBER}" --body "<è®¡åˆ’>"` æˆ– `gh issue comment "${ISSUE_NUMBER}" --body "<è®¡åˆ’>"` å‘å¸ƒåˆå§‹è®¡åˆ’ã€‚
                 - åœ¨è¿›è¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ç¼–è¾‘åŒä¸€è¯„è®ºæ¥ä¿æŒæ¸…å•å¯è§å’Œæœ€æ–°ï¼ˆä½¿ç”¨ `- [x]` æ ‡è®°å·²å®Œæˆçš„ä»»åŠ¡ï¼‰ã€‚
                   - è¦æ›´æ–°æ¸…å•ï¼š
                     1. æ‰¾åˆ°æ¸…å•çš„è¯„è®º IDï¼ˆä½¿ç”¨ `gh pr comment list "${ISSUE_NUMBER}"` æˆ– `gh issue comment list "${ISSUE_NUMBER}"`ï¼‰ã€‚
                     2. ä½¿ç”¨æ›´æ–°çš„æ¸…å•ç¼–è¾‘è¯„è®ºï¼š
                        - å¯¹äº PRï¼š`gh pr comment --edit <è¯„è®º-id> --body "<æ›´æ–°åçš„è®¡åˆ’>"`
                        - å¯¹äº Issueï¼š`gh issue comment --edit <è¯„è®º-id> --body "<æ›´æ–°åçš„è®¡åˆ’>"`
                     3. æ¸…å•åº”ä»…ä½œä¸º issue æˆ– PR ä¸Šçš„è¯„è®ºè¿›è¡Œç»´æŠ¤ã€‚ä¸è¦åœ¨ä»£ç æ–‡ä»¶ä¸­è·Ÿè¸ªæˆ–æ›´æ–°æ¸…å•ã€‚
               - å¦‚æœä¿®å¤éœ€è¦ä»£ç æ›´æ”¹ï¼Œç¡®å®šå“ªäº›æ–‡ä»¶å’Œè¡Œå—åˆ°å½±å“ã€‚å¦‚æœéœ€è¦æ¾„æ¸…ï¼Œè¯·è®°å½•å‘ç”¨æˆ·æå‡ºçš„ä»»ä½•é—®é¢˜ã€‚
               - ä½¿ç”¨å¯ç”¨å·¥å…·ï¼ˆä¾‹å¦‚ï¼Œ`write_file`ï¼‰è¿›è¡Œå¿…è¦çš„ä»£ç æˆ–æ–‡æ¡£æ›´æ”¹ã€‚ç¡®ä¿æ‰€æœ‰æ›´æ”¹éƒ½éµå¾ªé¡¹ç›®çº¦å®šå’Œæœ€ä½³å®è·µã€‚å°†æ‰€æœ‰ shell å˜é‡å¼•ç”¨ä¸º `"${VAR}"`ï¼ˆå¸¦å¼•å·å’ŒèŠ±æ‹¬å·ï¼‰ä»¥é˜²æ­¢é”™è¯¯ã€‚
               - è¿è¡Œä»»ä½•ç›¸å…³æµ‹è¯•æˆ–æ£€æŸ¥ä»¥éªŒè¯ä¿®å¤æŒ‰é¢„æœŸå·¥ä½œã€‚å¦‚æœå¯èƒ½ï¼Œæä¾›è¯æ˜é—®é¢˜å·²è§£å†³çš„è¯æ®ï¼ˆæµ‹è¯•è¾“å‡ºã€å±å¹•æˆªå›¾ç­‰ï¼‰ã€‚
               - **åˆ†æ”¯å’Œæäº¤**ï¼š
                 - **åˆ‡å‹¿ç›´æ¥æäº¤åˆ° `main` åˆ†æ”¯ã€‚**
                 - å¦‚æœä½ æ­£åœ¨å¤„ç† **pull request**ï¼ˆ`IS_PR` ä¸º `true`ï¼‰ï¼Œåˆ™å·²æ£€å‡ºæ­£ç¡®çš„åˆ†æ”¯ã€‚åªéœ€æäº¤å¹¶æ¨é€å³å¯ã€‚
                   - `git add .`
                   - `git commit -m "feat: <æè¿°æ›´æ”¹>"`
                   - `git push`
                 - å¦‚æœä½ æ­£åœ¨å¤„ç† **issue**ï¼ˆ`IS_PR` ä¸º `false`ï¼‰ï¼Œè¯·ä¸ºä½ çš„æ›´æ”¹åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚ä¸€ä¸ªå¥½çš„åˆ†æ”¯åç§°åº”è¯¥æ˜¯ `issue/${ISSUE_NUMBER}/<ç®€çŸ­æè¿°>`ã€‚
                   - `git checkout -b issue/${ISSUE_NUMBER}/my-fix`
                   - `git add .`
                   - `git commit -m "feat: <æè¿°ä¿®å¤>"`
                   - `git push origin issue/${ISSUE_NUMBER}/my-fix`
                   - æ¨é€åï¼Œä½ å¯ä»¥åˆ›å»º pull requestï¼š`gh pr create --title "Fixes #${ISSUE_NUMBER}: <ç®€çŸ­æ ‡é¢˜>" --body "æ­¤ PR è§£å†³ issue #${ISSUE_NUMBER}ã€‚"`
               - åœ¨ markdown æ–‡ä»¶ä¸­æ€»ç»“æ›´æ”¹å†…å®¹åŠåŸå› ï¼š`write_file("response.md", "<ä½ çš„å›å¤>")`
               - å°†å›å¤ä½œä¸ºè¯„è®ºå‘å¸ƒï¼š
                 - å¯¹äº PRï¼š`gh pr comment "${ISSUE_NUMBER}" --body-file response.md`
                 - å¯¹äº Issueï¼š`gh issue comment "${ISSUE_NUMBER}" --body-file response.md`

            2. **å¤„ç† Pull Request ä¸Šçš„è¯„è®º**
               - é˜…è¯»å…·ä½“è¯„è®ºå’Œ PR çš„ä¸Šä¸‹æ–‡ã€‚
               - ä½¿ç”¨ `gh pr view`ã€`gh pr diff` å’Œ `cat` ç­‰å·¥å…·æ¥ç†è§£ä»£ç å’Œè®¨è®ºã€‚
               - å¦‚æœè¯„è®ºè¦æ±‚æ›´æ”¹æˆ–æ¾„æ¸…ï¼Œè¯·éµå¾ªä¸ä¿®å¤ issue ç›¸åŒçš„è¿‡ç¨‹ï¼šåˆ›å»ºæ¸…å•è®¡åˆ’ã€å®æ–½ã€æµ‹è¯•å¹¶æäº¤ä»»ä½•æ‰€éœ€çš„æ›´æ”¹ï¼ŒåŒæ—¶æ›´æ–°æ¸…å•ã€‚
               - **æäº¤æ›´æ”¹**ï¼šå·²æ£€å‡ºæ­£ç¡®çš„ PR åˆ†æ”¯ã€‚åªéœ€æ·»åŠ ã€æäº¤å¹¶æ¨é€ä½ çš„æ›´æ”¹ã€‚
                 - `git add .`
                 - `git commit -m "fix: è§£å†³å®¡æŸ¥è¯„è®º"`
                 - `git push`
               - å¦‚æœè¯„è®ºæ˜¯é—®é¢˜ï¼Œè¯·ç›´æ¥æ¸…æ™°åœ°å›ç­”ï¼Œå¹¶æ ¹æ®éœ€è¦å¼•ç”¨ä»£ç æˆ–æ–‡æ¡£ã€‚
               - åœ¨ `response.md` ä¸­è®°å½•ä½ çš„å›å¤å¹¶å°†å…¶ä½œä¸º PR è¯„è®ºå‘å¸ƒï¼š`gh pr comment "${ISSUE_NUMBER}" --body-file response.md`

            3. **å›ç­” Issue ä¸Šçš„ä»»ä½•é—®é¢˜**
               - ä½¿ç”¨ `gh issue view` å’Œç›¸å…³å·¥å…·é˜…è¯»é—®é¢˜å’Œå®Œæ•´çš„ issue ä¸Šä¸‹æ–‡ã€‚
               - æ ¹æ®éœ€è¦ç ”ç©¶æˆ–åˆ†æä»£ç åº“ä»¥æä¾›å‡†ç¡®çš„ç­”æ¡ˆã€‚
               - å¦‚æœé—®é¢˜éœ€è¦ä»£ç æˆ–æ–‡æ¡£æ›´æ”¹ï¼Œè¯·éµå¾ªä¸Šè¿°ä¿®å¤è¿‡ç¨‹ï¼ŒåŒ…æ‹¬åˆ›å»ºå’Œæ›´æ–°æ¸…å•è®¡åˆ’ï¼Œå¹¶æŒ‰ç…§ç¬¬ 1 èŠ‚ä¸­çš„æè¿°ä¸ºä½ çš„æ›´æ”¹åˆ›å»ºæ–°åˆ†æ”¯ã€‚
               - åœ¨ `response.md` ä¸­ç¼–å†™æ¸…æ™°ç®€æ´çš„ç­”æ¡ˆï¼Œå¹¶å°†å…¶ä½œä¸º issue è¯„è®ºå‘å¸ƒï¼š`gh issue comment "${ISSUE_NUMBER}" --body-file response.md`

            ## æŒ‡å—

            - **ç®€æ´ä¸”å¯æ“ä½œã€‚** ä¸“æ³¨äºé«˜æ•ˆè§£å†³ç”¨æˆ·çš„é—®é¢˜ã€‚
            - **å¦‚æœä¿®æ”¹ä»£ç æˆ–æ–‡æ¡£ï¼ŒåŠ¡å¿…æäº¤å¹¶æ¨é€ä½ çš„æ›´æ”¹ã€‚**
            - **å¦‚æœä¸ç¡®å®šä¿®å¤æˆ–ç­”æ¡ˆï¼Œè¯·è§£é‡Šä½ çš„æ¨ç†å¹¶æå‡ºæ¾„æ¸…é—®é¢˜ã€‚**
            - **éµå¾ªé¡¹ç›®çº¦å®šå’Œæœ€ä½³å®è·µã€‚**
